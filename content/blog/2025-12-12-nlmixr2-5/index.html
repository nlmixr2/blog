---
title: nlmixr2 5.0
author: Matthew Fidler
date: '2025-12-12'
slug: []
categories: [nlmixr2]
tags: []
---



<div id="nlmixr2-5.0" class="section level3">
<h3>nlmixr2 5.0</h3>
<p>As time progresses, dependencies update, dependencies come and go, and
sometimes these dependencies change what happens to <code>rxode2</code>/<code>nlmixr2</code>
models.</p>
<p>One dependency change (<code>qs</code> being dropped) means that models from
before <code>nlmixr2</code>/<code>rxode2</code> 5.0 have the UI/fit models saved to disk will
may not be able to load completely in <code>nlmixr2</code> 5.0. This is because internally
<code>nlmixr2</code>/<code>rxode2</code> encoded its models in binary <code>qs</code> format.</p>
</div>
<div id="why-is-qs-going-away" class="section level3">
<h3>Why is <code>qs</code> going away?</h3>
<p>While the maintainer wanted to keep <code>qs</code> and its file format around, R
is changing and what is acceptable to access within C/C++ from R has
changed. This is to try to keep people from misusing these entry
points and breaking R.</p>
<p>Since <code>qs</code> had specific code accessing these entry points, this change
makes it impossible to have the same file format.</p>
<p>Travers Ching, the maintainer of <code>qs</code>, made a huge effort to create the
new <code>qs2</code> package that uses the R serialization instead of the custom
serialization. We are using the <code>qs2</code> serialization format for cached
files and intend to keep that option. (See <a href="https://github.com/qsbase/qs/issues/103">github post</a>)</p>
<p>We have switched to simple lists and environments for
<code>rxode2</code>/<code>nlmixr2</code> function models. For our C code, we have switched
to compressed serialized data, with the option to use <code>qs2</code> with
their superior encode/decode speed. This can be changed with the
<code>option(rxode2.serialize.type="")</code>. The following options are
currently supported:</p>
<ul>
<li><p><code>option(rxode2.serialize.type="qs2")</code> – Use the <code>qs2</code> format</p></li>
<li><p><code>option(rxode2.serialize.type="qdata")</code> – Use the <code>qdata</code> format
(from <code>qs2</code> package)</p></li>
<li><p><code>option(rxode2.serialize.type="base")</code> – Use simple, base
uncompressed serialization</p></li>
<li><p><code>option(rxode2.serialize.type="bzip2")</code> – Use base serialization
compressed with <code>bzip2</code></p></li>
<li><p><code>option(rxode2.serialize.type="xz")</code> – Use base serialization
compressed with <code>xz</code> (default)</p></li>
</ul>
<p>I would like to thank both the R core team and CRAN for their effort
in trying to make R more stable and secure.</p>
<p>I would also like to thank Travers Ching for his diligent effort in
making faster binary inputs/outputs from the R ecosystem.</p>
</div>
<div id="looking-forward" class="section level3">
<h3>Looking forward</h3>
<p>This has highlighted a need for a simple model export method that
gives simple text files or a zip file for everything a fit has and
possible minimal footprint.</p>
<p>This method will keep in mind the expanded
<a href="https://r-consortium.org/posts/expanded-fda-ectd-file-format-support-for-r-packages/">eCTD</a>
format and allow you to import or export models.</p>
</div>
